<!DOCTYPE html>

<html>
  <head>
    <img src="WebBanner2023.png" alt="Banner" width="900" height="300" />
    <h1><b>ENG0018  Computer  Laboratory 2024/25</b></h1>
    <h2>Student URN: 6871203</h2>
    <hr>
  <h2 style=”font-family:calibri:”><b>Conference  paper:  *Title* </b></h2>
    <hr>
    <!style for tables>
    <style>
      table{
        font-family: arial, sans-serif;
        border-collapse: collapse;
        width: 30%;
        
      }
      
      td, th {
      border: 1px solid #dddddd;
      text-align: left;
        padding: 8px;
      }
      tr:nth-child(even){
        background-color: #dddddd
      }
    </style>
    <style>
      p.ex1 {margin-left: 250px;
            }
    </style>
  </head>
  <!-- Last update -->
  <div id="last-updated">Loading last update time...</div>
  <!-- Verify button -->
  <button onclick="verifyLastUpdatedTime()" style="display: block; margin: 10px auto; padding: 8px 16px;">
    Verify Last Modified Time
  </button>
  <script>
    async function getLastUpdatedTime(){
      const username = 'FY6871203';
      const repo = 'FY6871203';

      const url = `https://api.github.com/repos/${username}/${repo}/commits`;

      try{
        const response = await fetch(url, {
          method: 'GET',
          headers: {
            'Accept': 'application/vnd.github.v3+json',
          }
      
      });
      if (!response.ok) {
        throw new Error(`Error fetching data: ${response.status} - ${response.statusText}`);
      }
      const commits = await response.json();
      if (commits && commits.length > 0) {
        const lastCommitDate = new Date(commits[0].commit.committer.date;

        //displaying the time on load
        document.getElementById('last-updated').innerText = `Last Modified Time: ${lastCommitDate.toLocaleString()}`;
      } else {
        document.getElementById('last-updated').innerText = 'No commits found in the repository.';
      }
    } catch (error) {
        console.error('Error fetching the last updated time:', error);
        document.getElementById('last-updated').innerText = 'Error fetching update time. Please check the repository details.';
      }
    }
    //inital load to display the time on page load
    window.onload = getLastUpdatedTime;
  </script> 
  </script>
</html>
